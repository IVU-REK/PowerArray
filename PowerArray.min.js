window.pa=function(r){return r.paIsArray?new paArray(r):void 0},window.pa.utils={DataTypes:{String:"String",Number:"Number",Date:"Date",Boolean:"Boolean",Object:"Object",ArrayOfObjects:"ArrayOfObjects",ArrayOfPrimitives:"ArrayOfPrimitives",RegExp:"RegExp",Function:"Function",Null:"Null",Undefined:"Undefined"},IsArrayOfObjects:function(r){var e;if(!r.paIsArray||void 0===r.length)return!1;for(e=r.length;e--;)if(pa.utils.GetTypeOf(r[e])!==pa.utils.DataTypes.Object)return!1;return!0},parseBoolean:function(r,e){if(!pa.utils.isNullEmptyOrUndefined(r)){var n=r.toUpperCase();if("TRUE"===n)return!0;if("FALSE"===n)return!1}if(e)throw new Error("The string passed to function parseBoolean ("+r+") doesn't match with any valid string");return null},isNullEmptyOrUndefined:function(r){if(null===r)return!0;var e=typeof r;if("boolean"===e)return!1;if("number"!==e&&"string"!==e&&"undefined"!==e)throw new Error("PowerArray => The function IsNullOrEmpty is designed to evaluate strings and numbers, but something different was provided ("+e+")");return"number"===e&&0===r?!1:r?0===(r+"").length:!0},GetTypeOf:function(r,e){if(null===r)return pa.utils.DataTypes.Null;if(void 0===r)return pa.utils.DataTypes.Undefined;var n=typeof r;switch(n){case"string":return pa.utils.DataTypes.String;case"number":return pa.utils.DataTypes.Number;case"boolean":return pa.utils.DataTypes.Boolean;case"object":return r instanceof String?pa.utils.DataTypes.String:r instanceof Date?pa.utils.DataTypes.Date:r instanceof Number?pa.utils.DataTypes.Number:r instanceof RegExp?pa.utils.DataTypes.RegExp:r.paIsArray?e&&pa.utils.IsArrayOfObjects(r)?pa.utils.DataTypes.ArrayOfObjects:pa.utils.DataTypes.ArrayOfPrimitives:pa.utils.DataTypes.Object;default:throw new Error("PowerArray Error : Unknown Datatype!")}},IsNumeric:function(r){return!isNaN(parseFloat(r))&&isFinite(r)}},window.pa.paEachParalellsHelper={CheckParalellTaskStates:function(r){var e=window.pa.paEachParalellsHelper.currentParalellIds[r];return e.CompletedTasks===e.TotalProcesses?!0:(console.info("not yet"),!1)},currentParalellIds:{},actionKeys:{Runeach:"RunEach",TaskState:"TaskState"},eventKeys:{RuneachDone:"RuneachDone",TaskState:"TaskStateResponse"}},window.pa.paWhereHelper={FillConditions:function(r,e){for(var n,t,a,o=e.length;o--;){if(n=e[o],"function"!=typeof n.condition){if(window.pa.utils.GetTypeOf(n.condition)===window.pa.utils.DataTypes.Object){var i=window.pa.utils.GetTypeOf(r[n.column],!0);switch(i){case window.pa.utils.DataTypes.ArrayOfObjects:case window.pa.utils.DataTypes.ArrayOfPrimitives:if(t=r[n.column].Where.call(r[n.column],n.condition,!1,!0),void 0!==t)continue;return!1;case window.pa.utils.DataTypes.Object:if(a=pa([r[n.column]]),t=a.Where.call(a,n.condition,!1,!0),void 0!==t)continue;return!1}}n.condition=pa.EqualTo3(n.condition)}if(!n.condition(r[n.column]))return!1}return!0},ProcessConditionObject:function(r,e,n,t){var a,o,i,s,u,l=window.pa.paWhereHelper.FillConditions,c=this.length,f=[];for(n||(r=[r]),a=0,c=r.length;c>a;a++){var p=r[a],h=[];for(var y in p)"realConditions"!==y&&p.hasOwnProperty(y)&&h.push({column:y,condition:p[y]});p.realConditions=h}if(c=this.length,e)for(a=0;c>a;a++){for(i=this[a],o=0,s=r.length;s>o&&!(u=l(i,r[o].realConditions));o++);if(u&&(f.push(i),t))return i}else for(;c--;)for(i=this[c],o=0,s=r.length;s>o;o++)if(u=l(i,r[o].realConditions)){if(f.push(i),t)return i;break}return t?void 0:f},equals:function(r,e,n,t){function a(r,e){var i,s,u,l,c;if((i=toString.call(r))!==toString.call(e))return!1;switch(i){default:return r.valueOf()===e.valueOf();case"[object Number]":return r=+r,e=+e,r?r===e:r===r?1/r===1/e:e!==e;case"[object RegExp]":return r.source==e.source&&r.global==e.global&&r.ignoreCase==e.ignoreCase&&r.multiline==e.multiline&&r.lastIndex==e.lastIndex;case"[object Function]":return!1;case"[object Array]":if(t&&null!==(l=o(r,e)))return l;if((s=r.length)!=e.length)return!1;for(;s--;)if(!((l=r[s])===(c=e[s])&&0!==l||a(l,c)))return!1;return!0;case"[object Object]":if(t&&null!==(l=o(r,e)))return l;if(s=0,n){var f=[];for(u in r)if(r.hasOwnProperty(u)){if(f.push(u),(l=r[u])===(c=e[u])&&0!==l||a(l,c))continue;return!1}for(u in e)if(e.hasOwnProperty(u)&&f[s++]!=u)return!1}else{for(u in r)if(r.hasOwnProperty(u)){if(++s,(l=r[u])===(c=e[u])&&0!==l||a(l,c))continue;return!1}for(u in e)if(e.hasOwnProperty(u)&&--s<0)return!1}return!0}}function o(r,e){function n(r,e){for(var n=t.length;n--;)if(t[n--]===e)return t[n]===r;return t.push(r,e),null}var t=[];return(o=n)(r,e)}return r===e&&0!==r||a(r,e)}},window.pa.auxiliaryFunctions={Contains:function(r,e,n){return function(t){if(!t.paIsArray)throw new Error("PowerArray error => parameter val passed to Contains function should be an array, only they can 'contain' something.");var a=t.length,o=!1,i=typeof r;switch(i){case"number":case"string":case"boolean":o=!0;break;default:if("function"==typeof r.getMonth){o=!0;break}o=!1}if(o)return t.indexOf(r)>-1;for(;a--;)if(pa.paWhereHelper.equals(t[a],r,e,n))return!0;return!1}},Between:function(r,e){if(r>e)throw new Error("PowerArray error => parameters 'from' and 'to' passed to function Between are not valid. Parameter 'to' should be greater than from!");return function(n){return n>=r&&e>=n}},EndsWith:function(r){var e=r+"";return function(r){return r+="",r.substr(r.length-e.length)===e}},StartsWith:function(r){var e=r+"";return function(r){return r+="",0===r.indexOf(e)}},GreaterThan:function(r){return function(e){return e>r}},SmallerThan:function(r){return function(e){return r>e}},EqualTo3:function(r){return function(e){return e===r}},EqualTo2:function(r){return function(e){return e==r}},IsUndefined:function(){return function(r){return void 0===r}},IsDefined:function(){return function(r){return void 0!==r}},In:function(r){return arguments.length>1&&(r=Array.prototype.slice.call(arguments)),function(e){return-1!==r.indexOf(e)}},NotIn:function(r){return arguments.length>1&&(r=Array.prototype.slice.call(arguments)),function(e){return-1===r.indexOf(e)}},EqualTo:function(r,e,n,t){return function(a){return e?e(a,r):pa.paWhereHelper.equals(r,a,n,t)}},Like:function(r){return r.paIsArray||(r=arguments.length>1?Array.prototype.slice.call(arguments):[r]),function(e){for(var n=r.length;n--;)if(-1===e.indexOf(r[n]))return!1;return!0}},NotLike:function(r){return r.paIsArray||(r=arguments.length>1?Array.prototype.slice.call(arguments):[r]),function(e){for(var n=r.length;n--;)if(e.indexOf(r[n])>-1)return!1;return!0}},LikeIgnoreCase:function(r){var e="";return r.paIsArray||(r=arguments.length>1?Array.prototype.slice.call(arguments):[r]),function(n){for(var t=r.length;t--;)if(e=r[t].toUpperCase(),-1===n.toUpperCase().indexOf(e))return!1;return!0}},NotLikeIgnoreCase:function(r){var e="";return r.paIsArray||(r=arguments.length>1?Array.prototype.slice.call(arguments):[r]),function(n){for(var t=r.length;t--;)if(e=r[t].toUpperCase(),n.toUpperCase().indexOf(e)>-1)return!1;return!0}},IsTruthy:function(){return function(r){return r?!0:!1}},IsFalsy:function(){return function(r){return r?!1:!0}},IsTrue:function(){return function(r){return r===!0}},IsFalse:function(){return function(r){return r===!1}},IsEmpty:function(){return function(r){return void 0===r||""===r||null===r||0===r||r.paIsArray&&0===r.length}},IsNotEmpty:function(){return function(r){return void 0===r||null===r?!1:(r+"").length>0}},IsNull:function(){return function(r){return null===r}},IsNotNull:function(){return function(r){return null!==r}},IsNaN:function(){return function(r){return isNaN(r)}},IsNotNaN:function(){return function(r){return!isNaN(r)}}},window.pa.prototypedFunctions_Array={getIndexByProperty:function(r){var e,n,t=this,a=arguments.length,o=t.length;for(n=0;o>n;n++){var i=t[n];for(e=1;a>e;e++){var s=arguments[e],u="()"===s.substring(s.length-2),l=u?s.substr(0,s.length-2):s;if(i=u?i[l]():i[s],e+1===a&&i==r)return n}}return-1},getPropertyFlat:function(r,e,n,t){var a=this,o=[],i=a.length;if(e===!0)for(var s=0;i>s;s++)(n||-1===o.indexOf(a[s][r]))&&(t===!0||void 0!==a[s][r])&&o.push(a[s][r]);else for(;i--;)(n||-1===o.indexOf(a[i][r]))&&(t===!0||void 0!==a[i][r])&&o.push(a[i][r]);return o},GetByProperty:function(r){var e,n,t=this,a=[],o=arguments.length,i=t.length;for(n=0;i>n;n++){var s=t[n];for(e=1;o>e;e++){var u=arguments[e],l="()"===u.substring(u.length-2),c=l?u.substr(0,u.length-2):u;s=l?s[c]():s[u],e+1===o&&s===r&&a.push(t[n])}}return a},RunEach:function(r,e){for(var n=this.length;n--;)r(this[n]);return e&&e(),this},RunEachParalell:function(r,e,n){if(!self.Worker)return this.RunEach(r,this,n);var t,a=this,o="RunEachParalell_"+Math.floor(1e9*Math.random()+1);window.pa.paEachParalellsHelper.currentParalellIds[o]={CompletedTasks:0,TotalProcesses:e};for(var i=parseInt(this.length/e),s=e;e--;)t=s-e*i,setTimeout(function(){a.slice(t,t+i).RunInWorker(r,function(){window.pa.paEachParalellsHelper.currentParalellIds[o].CompletedTasks++,window.pa.paEachParalellsHelper.CheckParalellTaskStates(o)&&n&&n()})},0)},RunInWorker:function(r,e){var n=URL.createObjectURL(new Blob(["(",function(){var r,e,n,t;self.onmessage=function(a){switch(a.action){case pa.paEachParalellsHelper.actionKeys.Runeach:for(r=a.array,e=a.func,n=r.length,t=n;t--;)e(this._array[t]);self.postMessage({event:pa.paEachParalellsHelper.eventKeys.RuneachDone});break;case pa.paEachParalellsHelper.actionKeys.TaskState:self.postMessage({event:pa.paEachParalellsHelper.eventKeys.TaskState,value:t*n/100})}}}.toString(),")()"],{type:"application/javascript"})),t=new Worker(n);return t.postMessage({array:this,func:r}),e&&e(),this},Sort:function(r){var e=[],n=typeof r;switch(n){case"string":var t=r.toUpperCase();switch(t){case"ASCENDING":case"ASC":return this.sort(function(r,e){return e>r?-1:r>e?1:0});case"DESCENDING":case"DESC":return this.sort(function(r,e){return r>e?-1:e>r?1:0});case"DESCENDINGIGNORECASE":case"DESCIGNORECASE":return this.sort(function(r,e){return-1*r.toLowerCase().localeCompare(e.toLowerCase())});case"ASCENDINGIGNORECASE":return this.sort(function(r,e){try{return r.toLowerCase().localeCompare(e.toLowerCase())}catch(n){if(console&&console.warn)return console.warn("PowerArray => Error trying to sort by "+t+". When sorting by "+t+", all values has to be strings. Probably it's not the case!. Now casting to string, performance may be affected."),r+="",e+="",r.toLowerCase().localeCompare(e.toLowerCase())}});default:throw new Error("PowerArray Error: Invalid sort condition. If you pass a first parameter of type String to the Sort function,' PoserArray assumes that you have a simple array on your hand (one dimension of primitives). Possible parameter values for function Sort  in that situation, are: 1) To sort Ascending: 'Asc' and 'AscIgnoreCase' (aliases: 'Ascending', 'AscendingIgnoreCase'), and 2) To sort Descending: 'Desc','Descending' (aliases: 'Descending', 'DescendingIgnoreCase') ")}break;case"object":if(r instanceof RegExp)throw new Error("PowerArray Error: Invalid sortConditions object. A RegExp is not allowed as Sort Criterion!");if(!r&&r.hasOwnProperty("length"))throw new Error("PowerArray Error: Invalid sortConditions object");for(var a in r)if(r.hasOwnProperty(a)){var o=r[a].toUpperCase();switch(o){case"ASC":case"DESC":break;default:throw new Error("PowerArray Configuration Error => Invalid sort direction for property "+a+": '"+r[a]+"', it should be ASC or DESC")}e.push({column:a,sortDirection:o})}return this.sort(function(r,n){for(var t,a,o=0,i=0,s=e.length;s>i;i++)switch(a=10-i,t=e[i].column,e[i].sortDirection){case"ASC":r[t]<n[t]?o-=a:r[t]>n[t]&&(o+=a);break;case"DESC":r[t]<n[t]?o+=a:r[t]>n[t]&&(o-=a)}return o});case"undefined":return this.sort();case"function":return this.sort(r);default:throw new Error("Unknown sortConditions object type ("+n+")")}},Where:function(r,e,n){var t,a,o=this.length,i=[];if("object"!=typeof r||r.paIsArray){if(r.paIsArray)i.push.apply(i,pa.paWhereHelper.ProcessConditionObject.call(this,r,e,!0,n));else if(e){for(t=0;o>t;t++)if(a=this[t],r(a)){if(n)return a;i.push(a)}}else for(;o--;)if(a=this[o],r(a)){if(n)return a;i.push(a)}}else i=pa.paWhereHelper.ProcessConditionObject.call(this,r,e,!1,n);return i},First:function(r){return 0===arguments.length?this.length>0?this[0]:void 0:pa.prototypedFunctions_Array.Where.call(this,r,!0,!0)}};var paArray=function(r){if(!r.paIsArray)throw new Error('PowerArray warning! => Invalid array passed to pa function"');var e=r.slice(0),n=window.pa.prototypedFunctions_Array;for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e};paArray.prototype.isArray=!0,function(){var r=window.pa.auxiliaryFunctions;for(var e in r)r.hasOwnProperty(e)&&(window.pa[e]=r[e],window[e]?console.warn("PowerArray warning! => property window."+e+" already exists. PowerArrayFunction pa."+e+' cannot register this function on window scope. However, you can still using it by calling "pa.'+e+'"'):window[e]=r[e]);Array.prototype.paIsArray||(Array.prototype.paIsArray=!0);var n=window.pa.prototypedFunctions_Array;for(var t in n)n.hasOwnProperty(t)&&(Array.prototype.hasOwnProperty(t)?console.warn("PowerArray warning! => Array Prototype was modified by other library, and the function name "+t+" is already in use. PowerArray will NOT override the prototype method. However, you can still using the function "+t+" by surrounding your array with a pa constructor call, as following: pa(yourArrayName)."+t+"(...)"):Array.prototype[t]=n[t],paArray.prototype[t]=n[t])}();
