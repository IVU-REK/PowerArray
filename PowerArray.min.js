window.pa=window.pa||{paEachParalellsHelper:{CheckParalellTaskStates:function(r){var e=window.pa.paEachParalellsHelper.currentParalellIds[r];return e.CompletedTasks===e.TotalProcesses?!0:(console.info("not yet"),!1)},currentParalellIds:{},actionKeys:{Runeach:"RunEach",TaskState:"TaskState"},eventKeys:{RuneachDone:"RuneachDone",TaskState:"TaskStateResponse"}},paWhereHelper:{FillConditions:function(r,e){for(var n,t=e.length;t--;)if(n=e[t],"function"!=typeof n.condition&&(n.condition=pa.EqualTo3(n.condition)),!n.condition(r[n.column]))return!1;return!0},ProcessConditionObject:function(r,e,n){var t,o,a,i,s,u=window.pa.paWhereHelper.FillConditions,l=this.length,c=[];for(n||(r=[r]),t=0,l=r.length;l>t;t++){var f=r[t],p=[];for(var h in f)"realConditions"!==h&&f.hasOwnProperty(h)&&p.push({column:h,condition:f[h]});f.realConditions=p}if(l=this.length,e)for(t=0;l>t;t++){for(a=this[t],o=0,i=r.length;i>o&&!(s=u(a,r[o].realConditions));o++);s&&c.push(a)}else for(;l--;)for(a=this[l],o=0,i=r.length;i>o;o++)if(s=u(a,r[o].realConditions)){c.push(a);break}return c},equals:function(r,e,n,t){function o(r,e){var i,s,u,l,c;if((i=toString.call(r))!==toString.call(e))return!1;switch(i){default:return r.valueOf()===e.valueOf();case"[object Number]":return r=+r,e=+e,r?r===e:r===r?1/r===1/e:e!==e;case"[object RegExp]":return r.source==e.source&&r.global==e.global&&r.ignoreCase==e.ignoreCase&&r.multiline==e.multiline&&r.lastIndex==e.lastIndex;case"[object Function]":return!1;case"[object Array]":if(t&&null!==(l=a(r,e)))return l;if((s=r.length)!=e.length)return!1;for(;s--;)if(!((l=r[s])===(c=e[s])&&0!==l||o(l,c)))return!1;return!0;case"[object Object]":if(t&&null!==(l=a(r,e)))return l;if(s=0,n){var f=[];for(u in r)if(r.hasOwnProperty(u)){if(f.push(u),(l=r[u])===(c=e[u])&&0!==l||o(l,c))continue;return!1}for(u in e)if(e.hasOwnProperty(u)&&f[s++]!=u)return!1}else{for(u in r)if(r.hasOwnProperty(u)){if(++s,(l=r[u])===(c=e[u])&&0!==l||o(l,c))continue;return!1}for(u in e)if(e.hasOwnProperty(u)&&--s<0)return!1}return!0}}function a(r,e){function n(r,e){for(var n=t.length;n--;)if(t[n--]===e)return t[n]===r;return t.push(r,e),null}var t=[];return(a=n)(r,e)}return r===e&&0!==r||o(r,e)}},auxiliaryFunctions:{Contains:function(r,e,n){return function(t){if(!t.paIsArray)throw new Error("PowerArray error => parameter val passed to Contains function should be an array, only they can 'contain' something.");var o=t.length,a=!1,i=typeof r;switch(i){case"number":case"string":case"boolean":a=!0;break;default:if("function"==typeof r.getMonth){a=!0;break}a=!1}if(a)return t.indexOf(r)>-1;for(;o--;)if(pa.paWhereHelper.equals(t[o],r,e,n))return!0;return!1}},Between:function(r,e){if(r>e)throw new Error("PowerArray error => parameters 'from' and 'to' passed to function Between are not valid. Parameter 'to' should be greater than from!");return function(n){return n>=r&&e>=n}},BiggerThan:function(r){return function(e){return e>r}},SmallerThan:function(r){return function(e){return r>e}},EqualTo3:function(r){return function(e){return e===r}},EqualTo2:function(r){return function(e){return e==r}},In:function(r){if(!r.paIsArray)throw new Error("PowerArray error => parameter list passed to NotIn function should be an array");return function(e){return-1!==r.indexOf(e)}},NotIn:function(r){if(!r.paIsArray)throw new Error("PowerArray error => parameter list passed to NotIn function should be an array");return function(e){return-1===r.indexOf(e)}},EqualTo:function(r,e){return function(n){return e?e(n,r):pa.paWhereHelper.equals(r,n)}},Like:function(r){return r.paIsArray?function(e){for(var n=r.length;n--;)if(-1===e.indexOf(r[n]))return!1;return!0}:function(e){return e.indexOf(r)>-1}},NotLike:function(r){return r.paIsArray?function(e){for(var n=r.length;n--;)if(e.indexOf(r[n])>-1)return!1;return!0}:function(e){return-1===e.indexOf(r)}},LikeIgnoreCase:function(r){var e="";return r.paIsArray?function(n){for(var t=r.length;t--;)if(e=r[t].toUpperCase(),-1===n.toUpperCase().indexOf(e))return!1;return!0}:(e=r.toUpperCase(),function(r){return r.toUpperCase().indexOf(e)>-1})},NotLikeIgnoreCase:function(r){var e="";return r.paIsArray?function(n){for(var t=r.length;t--;)if(e=r[t].toUpperCase(),n.toUpperCase().indexOf(e)>-1)return!1;return!0}:(e=r.toUpperCase(),function(r){return-1===r.toUpperCase().indexOf(e)})}},prototypedFunctions_Array:{getIndexByProperty:function(r){var e,n,t=this,o=arguments.length,a=t.length;for(n=0;a>n;n++){var i=t[n];for(e=1;o>e;e++){var s=arguments[e],u="()"===s.substring(s.length-2),l=u?s.substr(0,s.length-2):s;if(i=u?i[l]():i[s],e+1===o&&i==r)return n}}return-1},getPropertyFlat:function(r,e,n,t){var o=this,a=[],i=o.length;if(e===!0)for(var s=0;i>s;s++)(n||-1===a.indexOf(o[s][r]))&&(t===!0||void 0!==o[s][r])&&a.push(o[s][r]);else for(;i--;)(n||-1===a.indexOf(o[i][r]))&&(t===!0||void 0!==o[i][r])&&a.push(o[i][r]);return a},GetByProperty:function(r){var e,n,t=this,o=[],a=arguments.length,i=t.length;for(n=0;i>n;n++){var s=t[n];for(e=1;a>e;e++){var u=arguments[e],l="()"===u.substring(u.length-2),c=l?u.substr(0,u.length-2):u;s=l?s[c]():s[u],e+1===a&&s===r&&o.push(t[n])}}return o},RunEach:function(r,e){for(var n=this.length;n--;)r(this[n]);return e&&e(),this},RunEachParalell:function(r,e,n){if(!self.Worker)return this.RunEach(r,this,n);var t,o=this,a="RunEachParalell_"+Math.floor(1e9*Math.random()+1);window.pa.paEachParalellsHelper.currentParalellIds[a]={CompletedTasks:0,TotalProcesses:e};for(var i=parseInt(this.length/e),s=e;e--;)t=s-e*i,setTimeout(function(){o.slice(t,t+i).RunInWorker(r,function(){window.pa.paEachParalellsHelper.currentParalellIds[a].CompletedTasks++,window.pa.paEachParalellsHelper.CheckParalellTaskStates(a)&&n&&n()})},0)},RunInWorker:function(r,e){var n=URL.createObjectURL(new Blob(["(",function(){var r,e,n,t;self.onmessage=function(o){switch(o.action){case pa.paEachParalellsHelper.actionKeys.Runeach:for(r=o.array,e=o.func,n=r.length,t=n;t--;)e(this._array[t]);self.postMessage({event:pa.paEachParalellsHelper.eventKeys.RuneachDone});break;case pa.paEachParalellsHelper.actionKeys.TaskState:self.postMessage({event:pa.paEachParalellsHelper.eventKeys.TaskState,value:t*n/100})}}}.toString(),")()"],{type:"application/javascript"})),t=new Worker(n);return t.postMessage({array:this,func:r}),e&&e(),this},Sort:function(r){var e=[],n=typeof r;switch(n){case"string":var t=r.toUpperCase();switch(t){case"ASC":return this.sort(function(r,e){return e>r?-1:r>e?1:0});case"DESC":return this.sort(function(r,e){return r>e?-1:e>r?1:0});case"DESCIGNORECASE":return this.sort(function(r,e){return-1*r.toLowerCase().localeCompare(e.toLowerCase())});case"ASCIGNORECASE":return this.sort(function(r,e){return r.toLowerCase().localeCompare(e.toLowerCase())});default:throw new Error("PowerArray Error: Invalid sort condition. If you pass a first parameter of type String to the Sort function, we assume you have , Power for simple array. It can be Asc or Desc")}break;case"object":if(r instanceof RegExp)throw new Error("PowerArray Error: Invalid sortConditions object. A RegExp is not allowed as Sort Criterion!");if(!r&&r.hasOwnProperty("length"))throw new Error("PowerArray Error: Invalid sortConditions object");for(var o in r)if(r.hasOwnProperty(o)){var a=r[o].toUpperCase();switch(a){case"ASC":case"DESC":break;default:throw new Error("PowerArray Configuration Error => Invalid sort direction for property "+o+": '"+r[o]+"', it should be ASC or DESC")}e.push({column:o,sortDirection:a})}return this.sort(function(r,n){for(var t,o,a=0,i=0,s=e.length;s>i;i++)switch(o=10-i,t=e[i].column,e[i].sortDirection){case"ASC":r[t]<n[t]?a-=o:r[t]>n[t]&&(a+=o);break;case"DESC":r[t]<n[t]?a+=o:r[t]>n[t]&&(a-=o)}return a});case"undefined":return this.sort();case"function":return this.sort(r);default:throw new Error("Unknown sortConditions object type ("+n+")")}},Where:function(r,e){var n,t,o=this.length,a=[];if("object"!=typeof r||r.paIsArray)if(r.paIsArray)a.push.apply(a,pa.paWhereHelper.ProcessConditionObject.call(this,r,e,!0));else if(e)for(n=0;o>n;n++)t=this[n],r(t)&&a.push(t);else for(;o--;)t=this[o],r(t)&&a.push(t);else a=pa.paWhereHelper.ProcessConditionObject.call(this,r,e,!1);return a}}},Array.prototype.paIsArray||(Array.prototype.paIsArray=!0),function(){var r=window.pa.auxiliaryFunctions;for(var e in r)r.hasOwnProperty(e)&&(window.pa[e]=r[e],window[e]?console.warn("PowerArray warning! => property window."+e+" already exists. PowerArrayFunction pa."+e+' cannot register this function on window scope. However, you can still using it by calling "pa.'+e+'"'):window[e]=r[e]);var n=window.pa.prototypedFunctions_Array;for(var t in n)n.hasOwnProperty(t)&&(Array.prototype.hasOwnProperty(t)?console.warn("PowerArray warning! => Array Prototype was modified by other library, and the function name "+t+" is already in use. PowerArray will NOT override the prototype method. However, you can still using the function "+t+" by surrounding your array with a pa constructor call, as following: pa(yourArrayName)."+t+"(...)"):Array.prototype[t]=n[t])}();